[options]
; InsightPulse AI - Odoo 19 Production Configuration
; Finance Shared Service Center Deployment

; ============================================================================
; Database Configuration
; ============================================================================
db_host = odoo-db
db_port = 5432
db_user = odoo
db_password = %(POSTGRES_PASSWORD)s
db_name = odoo
db_maxconn = 64
db_template = template0

; ============================================================================
; Server Configuration
; ============================================================================
; Use environment variables for dynamic configuration
http_port = 8069
http_interface = 0.0.0.0

; Longpolling (for chat/notifications)
longpolling_port = 8072

; Proxy mode (CRITICAL for HTTPS behind nginx)
proxy_mode = True

; ============================================================================
; Worker Configuration (for production)
; ============================================================================
; Number of worker processes (4 for 2 CPU cores)
workers = 4

; Maximum cron threads
max_cron_threads = 2

; ============================================================================
; Memory Limits
; ============================================================================
; Hard memory limit per worker (2.5 GB)
limit_memory_hard = 2684354560

; Soft memory limit per worker (2 GB)
limit_memory_soft = 2147483648

; ============================================================================
; Time Limits
; ============================================================================
; CPU timeout per request (seconds)
limit_time_cpu = 600

; Real time timeout per request (seconds)
limit_time_real = 1200

; ============================================================================
; File Paths
; ============================================================================
; Data directory (filestore, sessions, etc.)
data_dir = /var/lib/odoo

; Addons path (order matters! Custom addons first)
addons_path = /mnt/custom-addons,/mnt/extra-addons,/opt/odoo/oca-addons/account-financial-tools,/opt/odoo/oca-addons/account-invoicing,/opt/odoo/oca-addons/account-reconcile,/opt/odoo/oca-addons/account-closing,/opt/odoo/oca-addons/server-tools,/opt/odoo/oca-addons/web,/opt/odoo/oca-addons/queue,/opt/odoo/oca-addons/reporting-engine,/opt/odoo/addons

; ============================================================================
; Logging Configuration
; ============================================================================
; Log file
logfile = /var/log/odoo/odoo.log

; Log level: debug, debug_rpc, debug_rpc_answer, debug_sql, info, warn, error, critical
log_level = info

; Specific log handlers (module:level)
; Finance SSC modules at info level, everything else at warn
log_handler = :INFO,werkzeug:WARN,odoo.http:INFO

; Log database operations (disable in production)
log_db = False
log_db_level = warning

; Rotate log file
logrotate = True

; ============================================================================
; Security
; ============================================================================
; Admin password (set via environment variable)
admin_passwd = %(ODOO_ADMIN_PASSWORD)s

; List databases (disable in production)
list_db = False

; ============================================================================
; Internationalization
; ============================================================================
; Default language
default_lang = en_US

; Translate modules (for multi-language support)
translate_modules = ['all']

; ============================================================================
; Email Configuration
; ============================================================================
; SMTP server
email_from = noreply@insightpulseai.net
smtp_server = smtp.gmail.com
smtp_port = 587
smtp_ssl = False
smtp_user = False
smtp_password = False

; ============================================================================
; Session Configuration
; ============================================================================
; Max file upload size (100 MB for BIR forms/attachments)
limit_request = 104857600

; Max CSV/Excel import size (50 MB)
limit_memory_hard = 2684354560

; ============================================================================
; Report Configuration
; ============================================================================
; Report directory
reportgz = False

; ============================================================================
; Developer Mode
; ============================================================================
; Disable in production
dev_mode = False

; ============================================================================
; Geolocation
; ============================================================================
; Geolocation API provider
; geoip_database = /usr/share/GeoIP/GeoLite2-City.mmdb

; ============================================================================
; Multi-database Configuration
; ============================================================================
; Database filter (regex pattern for allowed database names)
; dbfilter = ^odoo$

; ============================================================================
; Finance SSC Specific Configuration
; ============================================================================
; Philippines timezone
server_wide_modules = base,web,queue_job

; Module auto-install (disable in production)
without_demo = True

; ============================================================================
; Performance Tuning
; ============================================================================
; Disable unnecessary features in production
test_enable = False
test_file = False
test_tags = None

; Screenshots on error (disable in production)
screenshots = /tmp/odoo_tests

; Transient model age limit (days)
osv_memory_age_limit = 1.0

; Transient model count limit
osv_memory_count_limit = False

; ============================================================================
; Queue Job Configuration (OCA)
; ============================================================================
; [queue_job]
; channels = root:4,root.finance_ssc:2,root.bir:1

; ============================================================================
; External API Integration
; ============================================================================
; Custom configuration for InsightPulse integrations
[insightpulse]
supabase_url = %(SUPABASE_URL)s
supabase_key = %(SUPABASE_KEY)s
mcp_endpoint = %(MCP_ENDPOINT)s
superset_endpoint = %(SUPERSET_ENDPOINT)s

; ============================================================================
; Philippines BIR Configuration
; ============================================================================
[bir]
; BIR eFPS credentials (set via environment variables)
efps_username = 
efps_password = 
efps_endpoint = https://efps.bir.gov.ph

; ATP (Authorization to Print) configuration
atp_number = 
atp_date_issued = 
atp_valid_until = 

; ============================================================================
; Finance SSC Agency Configuration
; ============================================================================
[agencies]
; Multi-agency codes for Finance Shared Service Center
enabled_agencies = RIM,CKVC,BOM,JPAL,JLI,JAP,LAS,RMQB

; Default agency for new transactions
default_agency = RIM

; ============================================================================
; Backup Configuration
; ============================================================================
[backup]
; Backup retention (days)
retention_days = 7

; Backup location
backup_dir = /backups/odoo

; Backup to DigitalOcean Spaces
spaces_endpoint = sgp1.digitaloceanspaces.com
spaces_bucket = insightpulse-backups
spaces_region = sgp1
