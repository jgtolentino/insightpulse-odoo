# InsightPulse Odoo 19.0 Environment Variables
# Copy this file to .env and fill in your actual values
# NEVER commit .env to git - it contains secrets

# =============================================================================
# Database Configuration (Supabase PostgreSQL)
# =============================================================================

# Supabase connection pooler (use for production - handles 200+ connections)
POSTGRES_HOST=aws-1-us-east-1.pooler.supabase.com
POSTGRES_PORT=6543
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_supabase_database_password
POSTGRES_DB=postgres

# Full connection string (alternative format)
POSTGRES_URL=postgresql://postgres:your_password@aws-1-us-east-1.pooler.supabase.com:6543/postgres

# =============================================================================
# Odoo Configuration
# =============================================================================

# Database connection (uses POSTGRES_* vars above)
ODOO_DB_HOST=${POSTGRES_HOST}
ODOO_DB_PORT=${POSTGRES_PORT}
ODOO_DB_NAME=${POSTGRES_DB}
ODOO_DB_USER=${POSTGRES_USER}
ODOO_DB_PASSWORD=${POSTGRES_PASSWORD}

# Odoo master password (for admin operations)
# Generate with: openssl rand -base64 32
ODOO_ADMIN_PASSWORD=your_secure_random_password_here

# Worker configuration (optimized for 512MB RAM)
ODOO_WORKERS=2
ODOO_MAX_CRON_THREADS=1
ODOO_DB_MAXCONN=8

# Memory limits (80% of 512MB instance)
ODOO_LIMIT_MEMORY_HARD=419430400   # 400MB hard limit
ODOO_LIMIT_MEMORY_SOFT=335544320   # 320MB soft limit

# Timeout limits
ODOO_LIMIT_TIME_CPU=300   # 5 minutes CPU time
ODOO_LIMIT_TIME_REAL=600  # 10 minutes real time

# Addons path (automatically configured in Dockerfile)
ODOO_ADDONS_PATH=/mnt/extra-addons/insightpulse,/mnt/extra-addons/custom,/mnt/extra-addons/oca,/usr/lib/python3/dist-packages/odoo/addons

# =============================================================================
# DigitalOcean Configuration
# =============================================================================

# DigitalOcean App Platform app ID
DO_APP_ID=your_app_id_here

# DigitalOcean API token (for deployments)
DO_ACCESS_TOKEN=dop_v1_your_digitalocean_api_token_here

# =============================================================================
# AI Configuration (Optional)
# =============================================================================

# AI provider (ollama for self-hosted, openai for API)
AI_PROVIDER=ollama

# Ollama configuration (self-hosted AI - $0/month)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:3b

# OpenAI configuration (optional fallback - costs apply)
# OPENAI_API_KEY=sk-your_openai_api_key_here
# OPENAI_MODEL=gpt-4o-mini

# =============================================================================
# GitHub Configuration (for CI/CD)
# =============================================================================

# GitHub token for API access
GITHUB_TOKEN=github_pat_your_github_token_here

# GitHub OAuth (if using GitHub integration)
GITHUB_OAUTH_CLIENT_ID=your_github_oauth_client_id_here
GITHUB_OAUTH_CLIENT_SECRET=your_github_oauth_client_secret_here
GITHUB_OAUTH_REDIRECT_URI=https://your-app.ondigitalocean.app/odoo/apps/auth/github/callback

# =============================================================================
# Security Configuration
# =============================================================================

# Allowed IPs for admin access (optional)
HUB_ALLOWED_IPS=127.0.0.1,::1

# Environment (development, staging, production)
NODE_ENV=production

# =============================================================================
# Optional Services
# =============================================================================

# Hub server configuration (if using GitHub Hub integration)
HUB_PORT=8082
HUB_HOST=0.0.0.0

# =============================================================================
# Supabase Configuration (for reference)
# =============================================================================

# Supabase project details (for Supabase CLI and direct API access)
SUPABASE_PROJECT_REF=your_project_ref_here
SUPABASE_URL=https://your_project_ref.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here
SUPABASE_ACCESS_TOKEN=your_supabase_access_token_here

# =============================================================================
# Deployment Configuration
# =============================================================================

# Docker image tag (for manual deployments)
ODOO_IMAGE_TAG=latest

# Host port (for local development)
ODOO_HOST_PORT=8069

# =============================================================================
# Notes
# =============================================================================

# 1. Generate secure passwords with: openssl rand -base64 32
# 2. Never commit .env to git - add to .gitignore
# 3. Use GitHub Secrets for CI/CD (see infra/do/secrets-template.md)
# 4. DigitalOcean App Platform automatically injects env vars from spec
# 5. For local development, use `docker-compose.yml` with this .env file
