# Git Attributes - Merge Strategies and File Handling
# =====================================================
#
# This file configures how Git handles different file types during merges.
# It enables intelligent merge strategies to reduce conflicts and improve
# automatic conflict resolution.
#
# Documentation:
# - https://git-scm.com/docs/gitattributes
# - See: scripts/setup/configure-git-merge-strategies.sh

# ============================================================================
# YAML Files - Semantic Merge
# ============================================================================
# Use custom YAML merge driver that understands YAML structure
# Intelligently merges lists, dicts, and scalars

*.yml merge=yaml
*.yaml merge=yaml

# ============================================================================
# Package Lock Files - Prefer Theirs
# ============================================================================
# Lock files are usually updated by dependency managers
# Accepting theirs and regenerating is often safer than manual merge

package-lock.json merge=theirs
yarn.lock merge=theirs
Pipfile.lock merge=theirs
poetry.lock merge=theirs
pnpm-lock.yaml merge=theirs
composer.lock merge=theirs
Gemfile.lock merge=theirs

# ============================================================================
# Environment & Local Config - Prefer Ours
# ============================================================================
# Local configurations should not be overwritten by upstream changes

.env merge=ours
.env.* merge=ours
*.local merge=ours
*.local.* merge=ours

# Configuration files
config/*.conf merge=ours
odoo.conf merge=ours
*.ini merge=ours

# ============================================================================
# Generated Files - Prefer Theirs
# ============================================================================
# Generated files should be regenerated, not manually merged

# Build outputs
**/dist/** merge=theirs
**/build/** merge=theirs
**/out/** merge=theirs
**/.next/** merge=theirs

# Python compiled files
**/__pycache__/** merge=theirs
*.pyc merge=theirs
*.pyo merge=theirs
*.pyd merge=theirs

# ============================================================================
# Binary Files
# ============================================================================
# Mark binary files explicitly to prevent Git from trying to merge them

# Database dumps
*.sql.gz binary
*.dump binary
*.db binary
*.sqlite binary
*.sqlite3 binary

# Images
*.png binary
*.jpg binary
*.jpeg binary
*.gif binary
*.ico binary
*.svg binary
*.webp binary

# Documents
*.pdf binary
*.doc binary
*.docx binary
*.xls binary
*.xlsx binary
*.ppt binary
*.pptx binary

# Archives
*.zip binary
*.tar binary
*.tar.gz binary
*.tgz binary
*.rar binary
*.7z binary

# Media
*.mp3 binary
*.mp4 binary
*.avi binary
*.mov binary
*.wmv binary
*.flv binary

# Fonts
*.ttf binary
*.otf binary
*.woff binary
*.woff2 binary
*.eot binary

# ============================================================================
# Documentation - Union Merge
# ============================================================================
# Combine both versions for documentation files
# Useful for files like README where both changes are often relevant

*.md merge=union
README* merge=union
CHANGELOG* merge=union
CONTRIBUTING* merge=union

# ============================================================================
# Source Code - Standard Merge with Rerere
# ============================================================================
# Use standard merge, but rerere will remember resolutions

# Python
*.py merge

# JavaScript/TypeScript
*.js merge
*.ts merge
*.tsx merge
*.jsx merge
*.mjs merge
*.cjs merge

# CSS/Styling
*.css merge
*.scss merge
*.sass merge
*.less merge

# HTML/Templates
*.html merge
*.htm merge
*.xml merge

# Shell scripts
*.sh merge
*.bash merge
*.zsh merge

# ============================================================================
# Data Files - Line-based Merge
# ============================================================================

# JSON
*.json merge

# XML
*.xml merge

# CSV/TSV
*.csv merge
*.tsv merge

# ============================================================================
# Odoo-Specific Files
# ============================================================================

# Odoo manifest files - careful merge
__manifest__.py merge
__openerp__.py merge

# Odoo data files - line-based merge
**/data/*.xml merge
**/views/*.xml merge
**/security/*.csv merge

# Odoo demo data - prefer theirs (can be regenerated)
**/demo/*.xml merge=theirs

# ============================================================================
# Git Configuration Files
# ============================================================================

.gitignore merge=union
.gitattributes merge=union

# ============================================================================
# CI/CD Configuration
# ============================================================================

# GitHub Actions - careful merge
.github/workflows/*.yml merge=yaml
.github/workflows/*.yaml merge=yaml

# Docker files - line-based merge
Dockerfile merge
docker-compose*.yml merge=yaml
docker-compose*.yaml merge=yaml

# ============================================================================
# Line Ending Normalization
# ============================================================================
# Ensure consistent line endings across platforms

# Text files should have LF in repository
* text=auto

# Explicitly set line endings for specific types
*.sh text eol=lf
*.py text eol=lf
*.js text eol=lf
*.ts text eol=lf
*.json text eol=lf
*.yml text eol=lf
*.yaml text eol=lf
*.xml text eol=lf
*.sql text eol=lf

# Windows-specific files
*.bat text eol=crlf
*.cmd text eol=crlf
*.ps1 text eol=crlf

# ============================================================================
# Large File Handling
# ============================================================================
# Prevent accidental commits of large files

# Mark certain files as requiring LFS (if enabled)
# Uncomment and configure if using Git LFS
# *.psd filter=lfs diff=lfs merge=lfs -text
# *.ai filter=lfs diff=lfs merge=lfs -text

# ============================================================================
# Diff Settings
# ============================================================================

# Better diff for specific file types
*.py diff=python
*.md diff=markdown

# ============================================================================
# Export Ignore
# ============================================================================
# Files/directories to exclude from git archive

.gitignore export-ignore
.gitattributes export-ignore
.github/ export-ignore
tests/ export-ignore
.editorconfig export-ignore
