[options]
# Database Configuration
db_host = postgres-stage
db_port = 5432
db_user = odoo
db_password = ${POSTGRES_PASSWORD}
db_name = odoo_staging
db_filter = ^odoo_staging$
db_maxconn = 64

# Server Configuration
http_port = 8069
longpolling_port = 8072
proxy_mode = True

# Multi-processing Configuration (adjust based on server resources)
workers = 2
max_cron_threads = 1
limit_memory_hard = 2684354560
limit_memory_soft = 2147483648
limit_request = 8192
limit_time_cpu = 600
limit_time_real = 1200

# Addons Path
addons_path = /mnt/addons,/mnt/oca,/usr/lib/python3/dist-packages/odoo/addons

# Admin Password (set via environment variable)
admin_passwd = ${ADMIN_PASSWORD}

# Logging Configuration
logfile = /var/log/odoo/odoo-staging.log
log_level = info
log_handler = :INFO

# Session Configuration
session_timeout = 3600

# Security Settings
list_db = False
dbfilter = ^odoo_staging$

# Email Configuration (staging - use Mailhog or similar)
# email_from = noreply-staging@insightpulseai.net
# smtp_server = localhost
# smtp_port = 1025
# smtp_ssl = False

# Development Settings (staging-specific)
# Uncomment for debugging
# dev_mode = reload,xml
# log_level = debug

# Performance Settings
osv_memory_age_limit = 1.0
osv_memory_count_limit = False

# WebSocket Configuration
websocket_keep_alive_timeout = 600
websocket_rate_limit_burst = 10
websocket_rate_limit_delay = 0.2
