database_uuid: null  # Will be auto-detected or set during import
datasets:
  - table_name: te_expenses_v
    schema: public
    database_uuid: null
    uuid: 10000000-0000-0000-0000-00000000e001
    sql: null
    params: null
    metrics:
      - metric_name: total_amount
        expression: SUM(total_amount)
        metric_type: null
        verbose_name: Total Amount
        description: Sum of all expense amounts
        d3format: ",.2f"
        extra: null
        warning_text: null
      - metric_name: expense_count
        expression: COUNT(*)
        metric_type: null
        verbose_name: Expense Count
        description: Number of expenses
        d3format: null
        extra: null
        warning_text: null
      - metric_name: avg_amount
        expression: AVG(total_amount)
        metric_type: null
        verbose_name: Average Amount
        description: Average expense amount
        d3format: ",.2f"
        extra: null
        warning_text: null
    columns:
      - column_name: expense_id
        verbose_name: null
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: employee_name
        verbose_name: null
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: department
        verbose_name: null
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: category
        verbose_name: null
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: currency
        verbose_name: null
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: status
        verbose_name: null
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: policy_flag
        verbose_name: null
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: total_amount
        verbose_name: null
        is_dttm: false
        is_active: true
        type: NUMERIC
        groupby: false
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: txn_date
        verbose_name: Transaction Date
        is_dttm: true
        is_active: true
        type: DATE
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null
      - column_name: month_date
        verbose_name: Month
        is_dttm: true
        is_active: true
        type: DATE
        groupby: true
        filterable: true
        expression: null
        description: null
        python_date_format: null

  - table_name: te_cash_advances_v
    schema: public
    database_uuid: null
    uuid: 10000000-0000-0000-0000-00000000e002
    sql: null
    params: null
    metrics:
      - metric_name: total_advances
        expression: SUM(advance_amount)
        metric_type: null
        verbose_name: Total Advances
        description: Sum of all cash advances
        d3format: ",.2f"
        extra: null
        warning_text: null
      - metric_name: outstanding_balance
        expression: SUM(current_balance)
        metric_type: null
        verbose_name: Outstanding Balance
        description: Total outstanding cash advance balance
        d3format: ",.2f"
        extra: null
        warning_text: null
    columns:
      - column_name: advance_id
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: employee_id
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: employee_name
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
      - column_name: current_balance
        is_dttm: false
        is_active: true
        type: NUMERIC
        groupby: false
        filterable: true
      - column_name: advance_amount
        is_dttm: false
        is_active: true
        type: NUMERIC
        groupby: false
        filterable: true
      - column_name: advance_status
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
      - column_name: issued_date
        is_dttm: true
        is_active: true
        type: DATE
        groupby: true
        filterable: true

  - table_name: te_approvals_v
    schema: public
    database_uuid: null
    uuid: 10000000-0000-0000-0000-00000000e003
    sql: null
    params: null
    metrics:
      - metric_name: open_items
        expression: COUNT(*) FILTER (WHERE state IS NOT NULL)
        metric_type: null
        verbose_name: Open Items
        description: Count of pending approval items
        d3format: null
        extra: null
        warning_text: null
      - metric_name: avg_hours_open
        expression: AVG(hours_open)
        metric_type: null
        verbose_name: Avg Hours Open
        description: Average hours in approval queue
        d3format: ",.1f"
        extra: null
        warning_text: null
    columns:
      - column_name: approval_id
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: expense_id
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: approver_name
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
      - column_name: state
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: hours_open
        is_dttm: false
        is_active: true
        type: NUMERIC
        groupby: false
        filterable: true
      - column_name: entered_at
        is_dttm: true
        is_active: true
        type: TIMESTAMP
        groupby: true
        filterable: true
      - column_name: decided_at
        is_dttm: true
        is_active: true
        type: TIMESTAMP
        groupby: true
        filterable: true

  - table_name: te_receipts_ocr_v
    schema: public
    database_uuid: null
    uuid: 10000000-0000-0000-0000-00000000e004
    sql: null
    params: null
    metrics:
      - metric_name: docs
        expression: COUNT(*)
        metric_type: null
        verbose_name: Documents
        description: Number of processed documents
        d3format: null
        extra: null
        warning_text: null
      - metric_name: avg_conf
        expression: AVG(ocr_confidence)
        metric_type: null
        verbose_name: Avg Confidence
        description: Average OCR confidence score
        d3format: ".2%"
        extra: null
        warning_text: null
    columns:
      - column_name: receipt_id
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: expense_id
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: true
        filterable: true
      - column_name: ocr_engine
        is_dttm: false
        is_active: true
        type: VARCHAR
        groupby: true
        filterable: true
      - column_name: ocr_confidence
        is_dttm: false
        is_active: true
        type: NUMERIC
        groupby: false
        filterable: true
      - column_name: parse_errors
        is_dttm: false
        is_active: true
        type: INTEGER
        groupby: false
        filterable: true
      - column_name: processed_at
        is_dttm: true
        is_active: true
        type: TIMESTAMP
        groupby: true
        filterable: true
