<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Logframe views -->
    <record id="view_finance_logframe_tree" model="ir.ui.view">
        <field name="name">ipai.finance.logframe.tree</field>
        <field name="model">ipai.finance.logframe</field>
        <field name="arch" type="xml">
            <list>
                <field name="level"/>
                <field name="code"/>
                <field name="name"/>
                <field name="task_count"/>
            </list>
        </field>
    </record>

    <record id="view_finance_logframe_form" model="ir.ui.view">
        <field name="name">ipai.finance.logframe.form</field>
        <field name="model">ipai.finance.logframe</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="level"/>
                            <field name="code"/>
                            <field name="name"/>
                            <field name="sequence"/>
                        </group>
                        <group>
                            <field name="task_count"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Logical Framework Components">
                            <group>
                                <field name="indicators"/>
                                <field name="means_of_verification"/>
                                <field name="assumptions"/>
                            </group>
                        </page>
                        <page string="Linked Tasks">
                            <field name="task_ids">
                                <list>
                                    <field name="name"/>
                                    <field name="date_deadline"/>
                                    <field name="user_ids" widget="many2many_tags"/>
                                    <field name="stage_id"/>
                                </list>
                            </field>
                        </page>
                        <page string="BIR Schedules">
                            <field name="bir_schedule_ids">
                                <list>
                                    <field name="name"/>
                                    <field name="filing_deadline"/>
                                    <field name="status"/>
                                    <field name="completion_pct" widget="progressbar"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_finance_logframe" model="ir.actions.act_window">
        <field name="name">Finance Logical Framework</field>
        <field name="res_model">ipai.finance.logframe</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- BIR Schedule views -->
    <record id="view_finance_bir_schedule_tree" model="ir.ui.view">
        <field name="name">ipai.finance.bir_schedule.tree</field>
        <field name="model">ipai.finance.bir_schedule</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="period_covered"/>
                <field name="filing_deadline"/>
                <field name="status"/>
                <field name="completion_pct" widget="progressbar"/>
            </list>
        </field>
    </record>

    <record id="view_finance_bir_schedule_form" model="ir.ui.view">
        <field name="name">ipai.finance.bir_schedule.form</field>
        <field name="model">ipai.finance.bir_schedule</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="status" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="period_covered"/>
                            <field name="logframe_id"/>
                        </group>
                        <group>
                            <field name="completion_pct" widget="progressbar"/>
                        </group>
                    </group>
                    <group string="Deadlines">
                        <group>
                            <field name="filing_deadline"/>
                            <field name="prep_deadline"/>
                        </group>
                        <group>
                            <field name="review_deadline"/>
                            <field name="approval_deadline"/>
                        </group>
                    </group>
                    <group string="Assignees">
                        <group>
                            <field name="supervisor_id"/>
                            <field name="reviewer_id"/>
                        </group>
                        <group>
                            <field name="approver_id"/>
                        </group>
                    </group>
                    <group string="Linked Tasks">
                        <group>
                            <field name="prep_task_id"/>
                            <field name="review_task_id"/>
                        </group>
                        <group>
                            <field name="approval_task_id"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_finance_bir_schedule" model="ir.actions.act_window">
        <field name="name">BIR Filing Schedule</field>
        <field name="res_model">ipai.finance.bir_schedule</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Menu items -->
    <menuitem id="menu_finance_ppm_root"
              name="Finance PPM"
              web_icon="ipai_finance_ppm,static/description/icon.png"
              sequence="10"/>

    <menuitem id="menu_finance_logframe"
              name="Logical Framework"
              parent="menu_finance_ppm_root"
              action="action_finance_logframe"
              sequence="10"/>

    <menuitem id="menu_finance_bir_schedule"
              name="BIR Schedule"
              parent="menu_finance_ppm_root"
              action="action_finance_bir_schedule"
              sequence="20"/>

    <menuitem id="menu_finance_ppm_dashboard"
              name="PPM Dashboard"
              parent="menu_finance_ppm_root"
              sequence="5"/>
</odoo>
