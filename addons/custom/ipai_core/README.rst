=========
IPAI Core
=========

..
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:d41d8cd98f00b204e9800998ecf8427e

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-insightpulseai%2Finsightpulse--odoo-lightgray.png?logo=github
    :target: https://github.com/insightpulseai/insightpulse-odoo/tree/19.0/addons/custom/ipai_core
    :alt: insightpulseai/insightpulse-odoo

|badge1| |badge2| |badge3|

Core infrastructure module providing shared utilities and frameworks for all InsightPulse Enterprise SaaS Parity modules.

**Table of contents**

.. contents::
   :local:

Features
========

* **Unified Approval Workflow Engine**: Configurable multi-level approval flows with automated routing
* **Rate Policy Calculation Framework**: Base classes for rate card calculations and markup policies
* **AI Workspace Connector Base**: Foundation for AI agent integrations (Claude, GPT, MCP)
* **Multi-tenancy Utilities**: Helper methods for multi-agency data isolation
* **RLS Policy Templates**: Supabase Row Level Security policy generators
* **Audit Trail Decorators**: Automatic change tracking with Chatter integration
* **Queue Job Utilities**: Asynchronous task helpers with retry logic
* **Chatter Integration Helpers**: Simplified message posting and activity scheduling

Configuration
=============

After installation, configure:

1. Go to **Settings → Technical → Approval Flows** to define approval chains
2. Set up approval rules in **Settings → Technical → Approval Rules**
3. Configure queue job settings in **Settings → Technical → Queue Jobs**

Usage
=====

This module is designed as a technical foundation and does not provide user-facing features on its own. It is automatically used by dependent modules:

- ``ipai_approvals`` - Unified approvals system
- ``ipai_ppm_costsheet`` - Vendor-privacy cost sheets
- ``ipai_rate_policy`` - Rate card management
- ``ipai_ppm`` - Project portfolio management
- ``ipai_saas_ops`` - SaaS operations dashboard

For developers:

**Using Approval Workflow Engine**:

.. code-block:: python

    from odoo import models, api
    from odoo.addons.ipai_core.models.approval_mixin import ApprovalMixin

    class PurchaseOrder(models.Model, ApprovalMixin):
        _inherit = 'purchase.order'

        @api.model
        def _get_approval_flow(self):
            return self.env.ref('ipai_approvals.flow_purchase_order')

        def action_submit_approval(self):
            return self.start_approval_flow()

**Using Rate Policy Framework**:

.. code-block:: python

    from odoo import models, fields
    from odoo.addons.ipai_core.models.rate_policy_base import RatePolicyBase

    class VendorRateCard(models.Model, RatePolicyBase):
        _name = 'vendor.rate.card'

        base_rate = fields.Monetary(string='Base Rate')
        markup_percent = fields.Float(string='Markup %', default=25.0)

        def calculate_final_rate(self):
            return self.base_rate * (1 + self.markup_percent / 100)

**Using Audit Trail Decorators**:

.. code-block:: python

    from odoo import models, fields, api
    from odoo.addons.ipai_core.tools.audit import audit_trail

    class CostSheet(models.Model):
        _name = 'cost.sheet'
        _inherit = ['mail.thread', 'mail.activity.mixin']

        @audit_trail(message_template="Rate changed from {old} to {new}")
        def write(self, vals):
            return super().write(vals)

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/insightpulseai/insightpulse-odoo/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/insightpulseai/insightpulse-odoo/issues/new?body=module:%20ipai_core%0Aversion:%2019.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* InsightPulseAI

Contributors
------------

* Jake Tolentino <jgtolentino_rn@yahoo.com>

Maintainers
-----------

This module is maintained by InsightPulseAI.

.. image:: https://insightpulseai.net/logo.png
   :alt: InsightPulseAI
   :target: https://insightpulseai.net

InsightPulseAI is a Finance Shared Service Center automation platform built on Odoo 19.0, providing enterprise SaaS parity for Clarity PPM, SAP Ariba, and Tableau workflows.

This module is part of the `insightpulseai/insightpulse-odoo <https://github.com/insightpulseai/insightpulse-odoo/tree/19.0/addons/custom/ipai_core>`_ project on GitHub.

You are welcome to contribute.
